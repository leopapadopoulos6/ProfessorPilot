{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Leo/Desktop/ProfessorPilot/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Leo/Desktop/ProfessorPilot/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Leo/Desktop/ProfessorPilot/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useAuth0}from\"@auth0/auth0-react\";import React,{useEffect,useState}from\"react\";import{CodeSnippet}from\"../components/code-snippet\";import{PageLayout}from\"../components/page-layout\";import{getAdminResource}from\"../services/message.service\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var AdminPage=function AdminPage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useAuth=useAuth0(),getAccessTokenSilently=_useAuth.getAccessTokenSilently;useEffect(function(){var isMounted=true;var getMessage=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var accessToken,_yield$getAdminResour,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return getAccessTokenSilently();case 2:accessToken=_context.sent;_context.next=5;return getAdminResource(accessToken);case 5:_yield$getAdminResour=_context.sent;data=_yield$getAdminResour.data;error=_yield$getAdminResour.error;if(isMounted){_context.next=10;break;}return _context.abrupt(\"return\");case 10:if(data){setMessage(JSON.stringify(data,null,2));}if(error){setMessage(JSON.stringify(error,null,2));}case 12:case\"end\":return _context.stop();}},_callee);}));return function getMessage(){return _ref.apply(this,arguments);};}();getMessage();return function(){isMounted=false;};},[getAccessTokenSilently]);return/*#__PURE__*/_jsx(PageLayout,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content-layout\",children:[/*#__PURE__*/_jsx(\"h1\",{id:\"page-title\",className:\"content__title\",children:\"Admin Page\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"content__body\",children:[/*#__PURE__*/_jsxs(\"p\",{id:\"page-description\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"This page retrieves an \",/*#__PURE__*/_jsx(\"strong\",{children:\"admin message\"}),\" from an external API.\"]}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"strong\",{children:[\"Only authenticated users with the\",\" \",/*#__PURE__*/_jsx(\"code\",{children:\"read:admin-messages\"}),\" permission should access this page.\"]})})]}),/*#__PURE__*/_jsx(CodeSnippet,{title:\"Admin Message\",code:message})]})]})});};","map":{"version":3,"names":["useAuth0","React","useEffect","useState","CodeSnippet","PageLayout","getAdminResource","jsx","_jsx","jsxs","_jsxs","AdminPage","_useState","_useState2","_slicedToArray","message","setMessage","_useAuth","getAccessTokenSilently","isMounted","getMessage","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","accessToken","_yield$getAdminResour","data","error","wrap","_callee$","_context","prev","next","sent","abrupt","JSON","stringify","stop","apply","arguments","children","className","id","title","code"],"sources":["C:/Users/Leo/Desktop/ProfessorPilot/client/src/pages/admin-page.js"],"sourcesContent":["import { useAuth0 } from \"@auth0/auth0-react\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { CodeSnippet } from \"../components/code-snippet\";\r\nimport { PageLayout } from \"../components/page-layout\";\r\nimport { getAdminResource } from \"../services/message.service\";\r\n\r\nexport const AdminPage = () => {\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const { getAccessTokenSilently } = useAuth0();\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    const getMessage = async () => {\r\n      const accessToken = await getAccessTokenSilently();\r\n      const { data, error } = await getAdminResource(accessToken);\r\n\r\n      if (!isMounted) {\r\n        return;\r\n      }\r\n\r\n      if (data) {\r\n        setMessage(JSON.stringify(data, null, 2));\r\n      }\r\n\r\n      if (error) {\r\n        setMessage(JSON.stringify(error, null, 2));\r\n      }\r\n    };\r\n\r\n    getMessage();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [getAccessTokenSilently]);\r\n\r\n  return (\r\n    <PageLayout>\r\n      <div className=\"content-layout\">\r\n        <h1 id=\"page-title\" className=\"content__title\">\r\n          Admin Page\r\n        </h1>\r\n        <div className=\"content__body\">\r\n          <p id=\"page-description\">\r\n            <span>\r\n              This page retrieves an <strong>admin message</strong> from an\r\n              external API.\r\n            </span>\r\n            <span>\r\n              <strong>\r\n                Only authenticated users with the{\" \"}\r\n                <code>read:admin-messages</code> permission should access this\r\n                page.\r\n              </strong>\r\n            </span>\r\n          </p>\r\n          <CodeSnippet title=\"Admin Message\" code={message} />\r\n        </div>\r\n      </div>\r\n    </PageLayout>\r\n  );\r\n};"],"mappings":"gZAAA,OAASA,QAAQ,KAAQ,oBAAoB,CAC7C,MAAO,CAAAC,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,OAASC,WAAW,KAAQ,4BAA4B,CACxD,OAASC,UAAU,KAAQ,2BAA2B,CACtD,OAASC,gBAAgB,KAAQ,6BAA6B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/D,MAAO,IAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CAC7B,IAAAC,SAAA,CAA8BT,QAAQ,CAAC,EAAE,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAnCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAE1B,IAAAI,QAAA,CAAmCjB,QAAQ,EAAE,CAArCkB,sBAAsB,CAAAD,QAAA,CAAtBC,sBAAsB,CAE9BhB,SAAS,CAAC,UAAM,CACd,GAAI,CAAAiB,SAAS,CAAG,IAAI,CAEpB,GAAM,CAAAC,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,WAAA,CAAAC,qBAAA,CAAAC,IAAA,CAAAC,KAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACS,CAAAhB,sBAAsB,EAAE,QAA5CQ,WAAW,CAAAM,QAAA,CAAAG,IAAA,CAAAH,QAAA,CAAAE,IAAA,SACa,CAAA5B,gBAAgB,CAACoB,WAAW,CAAC,QAAAC,qBAAA,CAAAK,QAAA,CAAAG,IAAA,CAAnDP,IAAI,CAAAD,qBAAA,CAAJC,IAAI,CAAEC,KAAK,CAAAF,qBAAA,CAALE,KAAK,IAEdV,SAAS,EAAAa,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAI,MAAA,mBAId,GAAIR,IAAI,CAAE,CACRZ,UAAU,CAACqB,IAAI,CAACC,SAAS,CAACV,IAAI,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC3C,CAEA,GAAIC,KAAK,CAAE,CACTb,UAAU,CAACqB,IAAI,CAACC,SAAS,CAACT,KAAK,CAAE,IAAI,CAAE,CAAC,CAAC,CAAC,CAC5C,CAAC,yBAAAG,QAAA,CAAAO,IAAA,MAAAd,OAAA,GACF,kBAfK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAef,CAEDrB,UAAU,EAAE,CAEZ,MAAO,WAAM,CACXD,SAAS,CAAG,KAAK,CACnB,CAAC,CACH,CAAC,CAAE,CAACD,sBAAsB,CAAC,CAAC,CAE5B,mBACEV,IAAA,CAACH,UAAU,EAAAqC,QAAA,cACThC,KAAA,QAAKiC,SAAS,CAAC,gBAAgB,CAAAD,QAAA,eAC7BlC,IAAA,OAAIoC,EAAE,CAAC,YAAY,CAACD,SAAS,CAAC,gBAAgB,CAAAD,QAAA,CAAC,YAE/C,EAAK,cACLhC,KAAA,QAAKiC,SAAS,CAAC,eAAe,CAAAD,QAAA,eAC5BhC,KAAA,MAAGkC,EAAE,CAAC,kBAAkB,CAAAF,QAAA,eACtBhC,KAAA,SAAAgC,QAAA,EAAM,yBACmB,cAAAlC,IAAA,WAAAkC,QAAA,CAAQ,eAAa,EAAS,yBAEvD,GAAO,cACPlC,IAAA,SAAAkC,QAAA,cACEhC,KAAA,WAAAgC,QAAA,EAAQ,mCAC2B,CAAC,GAAG,cACrClC,IAAA,SAAAkC,QAAA,CAAM,qBAAmB,EAAO,uCAElC,GAAS,EACJ,GACL,cACJlC,IAAA,CAACJ,WAAW,EAACyC,KAAK,CAAC,eAAe,CAACC,IAAI,CAAE/B,OAAQ,EAAG,GAChD,GACF,EACK,CAEjB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}